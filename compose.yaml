services:
  postgres:
    image: 'postgres:latest'
    restart: always
    environment:
      - 'POSTGRES_DB=vacationplanner'
      - 'POSTGRES_PASSWORD=postgres123'
      - 'POSTGRES_USER=postgres'
    ports:
      - '5432:5432'

  consul-server:
    image: hashicorp/consul:latest
    command: "agent -server -bootstrap"
  consul-agent1:
    image: hashicorp/consul:latest
    ports:
      - "8500:8500"
    command: "agent -join consul-server -client 0.0.0.0 -ui"
    links:
      - consul-server
    depends_on:
      - consul-server
